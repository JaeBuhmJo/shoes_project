<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shoes.mapper.HeaderMapper">


	<!-- 상품 상세 조회 -->
	<resultMap type="com.project.domain.header.ProductDTO" id="productDTO">
			<id property="productId" column="productId"/>
			<result property="brand" column="brand"/>
			<result property="gender" column="gender"/>
			<result property="price" column="price"/>
			<result property="detail" column="detail"/>
			<result property="category" column="category"/>
			<result property="productCountry" column="productCountry"/>
			<collection property="amount" column="pc"/>
			<collection property="productSize" column="pi"/>
	</resultMap>
	<resultMap type="com.project.domain.header.CartDTO" id="pc">
			<result property="productId" column="productID"/>
			<result property="cartAmount" column="cartAmount"/>
			
	</resultMap>
	<resultMap type="com.project.domain.header.InventoryDTO" id="pi">
			<result property="productId" column="productID"/>
			<result property="productSize" column="productSize"/>	
	</resultMap>
	<resultMap type="com.project.domain.header.MemberDTO" id="memberDTO">
			<id property="memberId" column="memberID"/>
			<result property="footSize" column="footSize"/>	
			<result property="name" column="name"/>	
			<collection property="memberCart" column="mc"/>	
	</resultMap>
	<resultMap type="com.project.domain.header.CartDTO" id="mc">
			<result property="memberId" column="memberID"/>
	</resultMap>

	<select id="detailGet" resultMap="productDTO,memberDTO">
		select p.brand,p.gender,p.price,p.detail,p.category,m.name,
		m.foot_size,p.product_country,i.product_size,c.cart_amount
		from carts c, products p, inventories i, members m
   		 where c.product_id=p.product_id
   		   and i.product_id=p.product_id
   		   and m.member_id=c.member_id
   		   and p.product_id=#{product_id} and m.member_id=#{member_id}
	</select>

</mapper>