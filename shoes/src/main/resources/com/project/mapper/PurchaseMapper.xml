<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.mapper.PurchaseMapper">

    <!-- 주문 상품 정보 -->
     <select id="getOrderlist" resultMap="PurchaseMap">
		select a.orderId, 
		       a.memberId, 
		       a.productId, 
		       a.inventoryId, 
		       a.purchaseAmount, 
		       a.purchaseDate,
        	   b.productName, 
        	   b.Price, 
        	   b.discountPrice, 
        	   b.totalprice, 
        	   b.attachmentList
        from purchases a left join products b on a.procuctId = b.procuctId
         where memberId = #{memberId}
	 </select>

	<resultMap type="com.project.domain.PurchaseDTO" id="PurchaseMap">
		<result column="productId" property="productId" />
		<result column="orderId" property="orderId" />
		<result column="inventoryId" property="inventoryId" />
		<result column="purchaseAmount" property="purchaseAmount" />
		<result column="purchaseDate" property="purchaseDate" />
		<collection property="orderproduct" resultMap="PurchaseMap"/>
	</resultMap>
	






   	<!-- 주문 목록 리스트 -->
		<select id="orderList" resultType="com.project.domain.OrderDTO">
			select orderId, memberId, Name, address, purchaseDate, totalPrice, 
			from orders where memberId = #{memberId};
	    </select>
     
    
	


</mapper>